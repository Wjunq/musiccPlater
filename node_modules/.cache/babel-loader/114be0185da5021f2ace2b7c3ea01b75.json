{"ast":null,"code":"import _regeneratorRuntime from \"F:/Fanny/musicplayer/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"F:/Fanny/musicplayer/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.string.trim.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport QRCode from \"qrcodejs2\";\nimport { reqLogin, reqSendPhoneVerify, reqCaptchaIsOk, reqQrKey, reqQrCreate } from \"@/api\";\nexport default {\n  name: \"Login\",\n  data: function data() {\n    return {\n      phone: \"\",\n      password: \"\",\n      // 控制对话框是否隐藏\n      dialogFormVisible: false,\n      // 二维码对话框是否隐藏\n      centerDialogVisible: false,\n      // 对话框的信息\n      diaLogInfo: {\n        iphone: \"\",\n        visibleNum: \"\",\n        markedWords: \"点击获取验证码\",\n        diaLogInputDisabled: false\n      }\n    };\n  },\n  methods: {\n    handlerLogin: function handlerLogin() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var phone, password, result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                phone = _this.phone, password = _this.password; // 手机和密码登录\n\n                if (!(phone && password)) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 4;\n                return reqLogin(phone, password);\n\n              case 4:\n                result = _context.sent;\n\n                if (result.code === 200) {\n                  _this.$message({\n                    type: \"success\",\n                    message: \"登录成功\"\n                  });\n\n                  console.log(result);\n                } else {\n                  _this.$message({\n                    type: \"error\",\n                    message: \"登录失败\"\n                  });\n                }\n\n                _context.next = 9;\n                break;\n\n              case 8:\n                _this.$message({\n                  type: \"warning\",\n                  message: \"请输入密码或手机号\"\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    // 其他登录方式\n    handlerOther: function handlerOther() {\n      this.dialogFormVisible = true;\n    },\n    // 点击对话框登录按钮的回调\n    handlerOk: function handlerOk() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _this2$diaLogInfo, iphone, visibleNum, result;\n\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // 验证验证码是否正确\n                _this2$diaLogInfo = _this2.diaLogInfo, iphone = _this2$diaLogInfo.iphone, visibleNum = _this2$diaLogInfo.visibleNum;\n\n                if (!(iphone && visibleNum)) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                _context2.next = 4;\n                return reqCaptchaIsOk(iphone, visibleNum);\n\n              case 4:\n                result = _context2.sent;\n\n                if (result.code === 200) {\n                  console.log(result);\n                } else {\n                  _this2.$message({\n                    type: \"warning\",\n                    title: \"验证码或手机号错误\"\n                  });\n                }\n\n                _context2.next = 9;\n                break;\n\n              case 8:\n                _this2.$notify({\n                  title: \"请输入手机号和验证码\",\n                  type: \"warning\",\n                  position: \"top-left\",\n                  showClose: false\n                });\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    // 点击获取手机验证码的回调\n    handlerSendPhoneVerify: function handlerSendPhoneVerify() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var result, maxNum, timeId;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!_this3.diaLogInfo.iphone.trim()) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                _context3.next = 3;\n                return reqSendPhoneVerify(_this3.diaLogInfo.iphone);\n\n              case 3:\n                result = _context3.sent;\n\n                if (result.code === 200) {\n                  // 发送成功，开始计时器,验证码60s之后重新发送\n                  maxNum = 60;\n                  timeId = setInterval(function () {\n                    _this3.diaLogInfo.diaLogInputDisabled = true;\n                    var countNum = maxNum--;\n                    _this3.diaLogInfo.markedWords = \"\".concat(countNum, \"s\\u540E\\u83B7\\u53D6\");\n\n                    if (countNum === 0) {\n                      clearInterval(timeId);\n                      _this3.diaLogInfo.markedWords = \"点击获取验证码\";\n                      _this3.diaLogInfo.diaLogInputDisabled = false;\n                    }\n                  }, 1000);\n                } else {\n                  _this3.$notify({\n                    title: result.message,\n                    type: \"warning\",\n                    position: \"top-right\",\n                    showClose: false\n                  });\n                }\n\n                _context3.next = 8;\n                break;\n\n              case 7:\n                _this3.$notify({\n                  title: \"请输入手机号\",\n                  type: \"warning\",\n                  position: \"bottom-left\",\n                  // 是否显示关闭按钮\n                  showClose: false\n                });\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    // 游客登录\n    anonimousLogo: function anonimousLogo() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this4.$message({\n                  type: \"error\",\n                  message: \"此接口在修复中\"\n                });\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    },\n    // 二维码登录\n    QrLogo: function QrLogo() {\n      var _this5 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var res, key, keyUrl;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _this5.centerDialogVisible = true; // 请求二维码key\n\n                _context5.next = 3;\n                return reqQrKey();\n\n              case 3:\n                res = _context5.sent;\n\n                if (!(res.code === 200)) {\n                  _context5.next = 12;\n                  break;\n                }\n\n                key = res.data.unikey;\n                _context5.next = 8;\n                return reqQrCreate(key);\n\n              case 8:\n                keyUrl = _context5.sent;\n\n                if (keyUrl.code === 200) {\n                  new QRCode(_this5.$refs.qrCodeUrl, {\n                    text: keyUrl.data.qrurl,\n                    width: 150,\n                    height: 150,\n                    colorDark: \"#000000\",\n                    colorLight: \"#ffffff\",\n                    correctLevel: QRCode.CorrectLevel.H\n                  });\n                  QRCode.clear();\n                }\n\n                _context5.next = 13;\n                break;\n\n              case 12:\n                _this5.$message({\n                  type: \"warning\",\n                  message: \"网络错误\"\n                });\n\n              case 13:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["reqLogin","reqSendPhoneVerify","reqCaptchaIsOk","reqQrKey","reqQrCreate","name","data","phone","password","dialogFormVisible","centerDialogVisible","diaLogInfo","iphone","visibleNum","markedWords","diaLogInputDisabled","methods","handlerLogin","result","type","message","console","handlerOther","handlerOk","title","position","showClose","handlerSendPhoneVerify","maxNum","timeId","setInterval","clearInterval","anonimousLogo","QrLogo","res","key","keyUrl","text","width","height","colorDark","colorLight","correctLevel","QRCode"],"sourceRoot":"src/views/Login","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div id=\"outer-wapper\">\r\n    <!--设置视频为背景 -->\r\n    <div class=\"video-box\">\r\n      <video\r\n        src=\"./audio/fish.mp4\"\r\n        class=\"video-background\"\r\n        preload=\"auto\"\r\n        loop\r\n        playsinline\r\n        autoplay\r\n        muted\r\n      ></video>\r\n      <!-- 表单登录 -->\r\n      <div id=\"login-wapper\">\r\n        <div id=\"login\">\r\n          <!-- 登录的表单 -->\r\n          <el-form size=\"normal\" style=\"width: '50%'\">\r\n            <el-form-item label=\"手机号\" label-width=\"80px\">\r\n              <el-input v-model=\"phone\" placeholder=\"请输入手机号\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"密码\" label-width=\"80px\">\r\n              <el-input\r\n                placeholder=\"请输入密码\"\r\n                v-model=\"password\"\r\n                show-password\r\n              ></el-input>\r\n            </el-form-item>\r\n\r\n            <el-button type=\"primary\" round size=\"medium\" @click=\"handlerLogin\"\r\n              >登录</el-button\r\n            >\r\n\r\n            <!-- 点击其他方式登录弹出对话框 -->\r\n            <el-button type=\"success\" round size=\"medium\" @click=\"handlerOther\"\r\n              >其他方式登录</el-button\r\n            >\r\n            <!-- 三个别的方式登录 -->\r\n            <div class=\"otherLogo\">\r\n              <a title=\"游客登录\" @click=\"anonimousLogo\">\r\n                <svg\r\n                  class=\"icon\"\r\n                  viewBox=\"0 0 1024 1024\"\r\n                  version=\"1.1\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    fill=\"#bfbfbf\"\r\n                    d=\"M615.424 534.528c98.816-40.96 168.96-138.24 168.96-251.904 0-150.016-122.368-272.384-272.384-272.384s-272.384 122.368-272.384 272.384c0 113.664 69.632 210.944 168.96 251.904-217.6 45.568-385.024 232.96-397.824 462.848-0.512 8.704 6.144 15.872 14.336 16.384h1.024c8.192 0 14.848-6.144 15.36-14.336 13.824-245.76 215.04-439.296 460.288-444.416 3.584 0 6.656 0.512 10.24 0.512s6.656 0 10.24-0.512c245.248 5.12 446.464 198.656 460.288 444.416 0.512 8.704 7.68 14.848 16.384 14.336 8.704-0.512 14.848-7.68 14.336-16.384-12.8-230.4-180.224-417.28-397.824-462.848z m-345.088-251.904c0-133.12 108.544-241.664 241.664-241.664s241.664 108.544 241.664 241.664c0 129.024-101.376 234.496-228.864 241.152h-25.6c-127.488-6.656-228.864-112.128-228.864-241.152z\"\r\n                  />\r\n                </svg>\r\n              </a>\r\n              <a title=\"邮箱登录\">\r\n                <svg\r\n                  class=\"icon\"\r\n                  viewBox=\"0 0 1024 1024\"\r\n                  version=\"1.1\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    fill=\"#bfbfbf\"\r\n                    d=\"M838.954667 234.666667H170.666667c-3.626667 0-7.168 0.448-10.56 1.322666l323.690666 323.669334a21.333333 21.333333 0 0 0 30.165334 0L838.954667 234.666667z m46.144 14.186666l-260.693334 260.693334 262.933334 262.912c5.44-7.168 8.661333-16.106667 8.661333-25.792V277.333333c0-10.944-4.117333-20.906667-10.88-28.48zM843.861333 789.333333l-249.6-249.621333-50.133333 50.133333a64 64 0 0 1-90.517333 0l-50.112-50.133333L156.373333 786.88c4.48 1.578667 9.28 2.453333 14.314667 2.453333h673.194667zM128.661333 754.218667L373.333333 509.525333 129.578667 265.813333A42.709333 42.709333 0 0 0 128 277.333333v469.333334c0 2.56 0.213333 5.098667 0.661333 7.552zM170.666667 192h682.666666a85.333333 85.333333 0 0 1 85.333334 85.333333v469.333334a85.333333 85.333333 0 0 1-85.333334 85.333333H170.666667a85.333333 85.333333 0 0 1-85.333334-85.333333V277.333333a85.333333 85.333333 0 0 1 85.333334-85.333333z\"\r\n                  />\r\n                </svg>\r\n              </a>\r\n              <a title=\"二维码登录\" @click=\"QrLogo\">\r\n                <svg\r\n                  class=\"icon\"\r\n                  viewBox=\"0 0 1024 1024\"\r\n                  version=\"1.1\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    fill=\"#bfbfbf\"\r\n                    d=\"M423.836543 114.819049l0-0.274246L204.08256 114.544803c-45.911656 0-83.09451 36.932144-83.356476 82.59309l-0.023536 0 0 207.579709c0 2.468215 0.500397 4.782933 1.239224 7.000438 6.678096 39.245839 40.831964 69.164243 82.140789 69.164243L423.836543 480.882282l0-0.237407c38.877449-2.432399 70.477144-31.363312 76.798107-68.926836 0.763386-2.217505 1.289366-4.532223 1.289366-7.000438L501.924016 197.137893l-0.025583 0C501.683539 153.253406 467.244168 117.538997 423.836543 114.819049zM458.038506 393.46021c0 24.14798-19.654642 43.705408-43.88551 43.705408L208.445938 437.165618c-24.230867 0-43.858904-19.557428-43.858904-43.705408L164.587034 201.980177c0-24.149003 19.628036-43.717687 43.858904-43.717687l205.708082 0c24.230867 0 43.88551 19.569708 43.88551 43.717687L458.039529 393.46021zM902.246517 195.111746c-0.215918-42.799782-33.818223-77.644381-76.153424-80.304977l0-0.261966L634.384863 114.544803c-44.790112 0-81.040734 36.037774-81.304747 80.56592l-0.023536 0 0 202.511273c0 2.407839 0.476861 4.673439 1.240247 6.831592 6.487761 38.292118 39.830147 67.472717 80.08906 67.472717l191.70823 0 0-0.226151c37.921681-2.385327 68.734454-30.613228 74.961272-67.246567 0.738827-2.158153 1.216711-4.423753 1.216711-6.831592L902.2721 195.111746 902.246517 195.111746zM859.461061 386.638851c0 23.551392-19.152199 42.643216-42.813085 42.643216L638.678656 429.282067c-23.658839 0-42.834574-19.091824-42.834574-42.643216L595.844082 199.832258c0-23.552415 19.175735-42.643216 42.834574-42.643216l177.969321 0c23.660886 0 42.813085 19.091824 42.813085 42.643216L859.461061 386.638851zM415.680792 539.887141l0-0.260943L201.839473 539.626197c-44.670385 0-80.874959 35.94363-81.114412 80.375585l-0.023536 0 0 201.974038c0 2.420119 0.477884 4.687766 1.215688 6.821359 6.464225 38.181601 39.73498 67.316152 79.922261 67.316152L415.680792 896.113331l0-0.236384c37.824467-2.350534 68.567655-30.529317 74.744331-67.079768 0.762363-2.133593 1.24127-4.40124 1.24127-6.821359L491.666394 620.001783l-0.049119 0C491.402381 577.308425 457.919802 542.53648 415.680792 539.887141zM448.975083 811.04077c0 23.493064-19.127639 42.524512-42.691311 42.524512L212.953601 853.565283c0 0-0.022513 0-0.047072 0l-6.822382 0c-23.563672 0-42.690288-19.031449-42.690288-42.524512L163.393859 624.687502c0-23.469528 19.126616-42.525536 42.690288-42.525536l200.200648 0c23.563672 0 42.691311 19.056008 42.691311 42.525536L448.976106 811.04077zM721.154066 753.120616c-14.741749 0-26.66736 11.508102-26.66736 25.699312l0 51.395554c0 14.228049 11.924587 25.721825 26.66736 25.721825 14.736633 0 26.663266-11.492752 26.663266-25.721825l0-51.395554C747.817332 764.628718 735.891721 753.120616 721.154066 753.120616zM834.775846 727.398792c-14.739702 0-26.665313 11.494799-26.665313 25.697265l0 77.118402c0 14.214746 11.924587 25.701358 26.665313 25.701358 14.763239 0 26.688849-11.487635 26.688849-25.701358l0-77.118402C861.464695 738.894613 849.538061 727.398792 834.775846 727.398792zM834.775846 573.172221c-14.739702 0-26.665313 11.506055-26.665313 25.722848l0 51.395554c0 14.189164 11.924587 25.697265 26.665313 25.697265 14.763239 0 26.688849-11.508102 26.688849-25.697265l0-51.395554C861.464695 584.679299 849.538061 573.172221 834.775846 573.172221zM721.154066 573.195757c-14.741749 0-26.66736 11.507078-26.66736 25.709545L694.486706 701.735295c0 14.192234 11.924587 25.686009 26.66736 25.686009 14.736633 0 26.663266-11.492752 26.663266-25.686009L747.817332 598.905302C747.817332 584.702835 735.891721 573.195757 721.154066 573.195757zM606.050538 701.735295c-14.68956 0-26.640754 11.435447-26.640754 25.663496l0 102.81669c0 14.214746 11.951193 25.701358 26.640754 25.701358 14.787798 0 26.712385-11.487635 26.712385-25.701358L632.762923 727.398792C632.763946 713.170742 620.838336 701.735295 606.050538 701.735295zM606.050538 573.172221c-14.68956 0-26.640754 11.506055-26.640754 25.722848l0 25.709545c0 14.201443 11.951193 25.686009 26.640754 25.686009 14.787798 0 26.712385-11.484565 26.712385-25.686009l0-25.709545C632.763946 584.679299 620.838336 573.172221 606.050538 573.172221z\"\r\n                  />\r\n                </svg>\r\n              </a>\r\n            </div>\r\n          </el-form>\r\n\r\n          <!-- 对话框组件 -->\r\n          <el-dialog\r\n            title=\"其他方式登录\"\r\n            width=\"500px\"\r\n            :visible.sync=\"dialogFormVisible\"\r\n          >\r\n            <el-form>\r\n              <el-form-item label=\"手机号\" label-width=\"100px\">\r\n                <el-input\r\n                  autocomplete=\"off\"\r\n                  v-model=\"diaLogInfo.iphone\"\r\n                  placeholder=\"请输入手机号\"\r\n                ></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"验证码登录\" label-width=\"100px\">\r\n                <el-input\r\n                  style=\"width: 100px\"\r\n                  autocomplete=\"off\"\r\n                  placeholder=\"请输入验证码\"\r\n                  v-model=\"diaLogInfo.visibleNum\"\r\n                ></el-input>\r\n\r\n                <el-button\r\n                  type=\"primary\"\r\n                  size=\"default\"\r\n                  @click=\"handlerSendPhoneVerify\"\r\n                  :disabled=\"diaLogInfo.diaLogInputDisabled\"\r\n                  >{{ diaLogInfo.markedWords }}</el-button\r\n                >\r\n              </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n              <el-button type=\"primary\" @click=\"handlerOk\">登 录</el-button>\r\n            </div>\r\n          </el-dialog>\r\n          <!-- 二维码的对话框 -->\r\n          <el-dialog\r\n            title=\"二维码登录\"\r\n            :visible.sync=\"centerDialogVisible\"\r\n            width=\"30%\"\r\n            center\r\n          >\r\n            <span>请使用网易云App扫码</span>\r\n            <div class=\"qrCode\" ref=\"qrCodeUrl\"></div>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button @click=\"centerDialogVisible = false\">取 消</el-button>\r\n              <el-button type=\"primary\" @click=\"centerDialogVisible = false\"\r\n                >确 定</el-button\r\n              >\r\n            </span>\r\n          </el-dialog>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport QRCode from \"qrcodejs2\";\r\nimport {\r\n  reqLogin,\r\n  reqSendPhoneVerify,\r\n  reqCaptchaIsOk,\r\n  reqQrKey,\r\n  reqQrCreate,\r\n} from \"@/api\";\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      phone: \"\",\r\n      password: \"\",\r\n      // 控制对话框是否隐藏\r\n      dialogFormVisible: false,\r\n      // 二维码对话框是否隐藏\r\n      centerDialogVisible: false,\r\n      // 对话框的信息\r\n      diaLogInfo: {\r\n        iphone: \"\",\r\n        visibleNum: \"\",\r\n        markedWords: \"点击获取验证码\",\r\n        diaLogInputDisabled: false,\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async handlerLogin() {\r\n      const { phone, password } = this;\r\n      // 手机和密码登录\r\n      if (phone && password) {\r\n        let result = await reqLogin(phone, password);\r\n        if (result.code === 200) {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"登录成功\",\r\n          });\r\n          console.log(result);\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"登录失败\",\r\n          });\r\n        }\r\n      } else {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"请输入密码或手机号\",\r\n        });\r\n      }\r\n    },\r\n    // 其他登录方式\r\n    handlerOther() {\r\n      this.dialogFormVisible = true;\r\n    },\r\n    // 点击对话框登录按钮的回调\r\n    async handlerOk() {\r\n      // 验证验证码是否正确\r\n      const { iphone, visibleNum } = this.diaLogInfo;\r\n      if (iphone && visibleNum) {\r\n        let result = await reqCaptchaIsOk(iphone, visibleNum);\r\n        if (result.code === 200) {\r\n          console.log(result);\r\n        } else {\r\n          this.$message({\r\n            type: \"warning\",\r\n            title: \"验证码或手机号错误\",\r\n          });\r\n        }\r\n      } else {\r\n        this.$notify({\r\n          title: \"请输入手机号和验证码\",\r\n          type: \"warning\",\r\n          position: \"top-left\",\r\n          showClose: false,\r\n        });\r\n      }\r\n    },\r\n    // 点击获取手机验证码的回调\r\n    async handlerSendPhoneVerify() {\r\n      if (this.diaLogInfo.iphone.trim()) {\r\n        let result = await reqSendPhoneVerify(this.diaLogInfo.iphone);\r\n        if (result.code === 200) {\r\n          // 发送成功，开始计时器,验证码60s之后重新发送\r\n          let maxNum = 60;\r\n          let timeId = setInterval(() => {\r\n            this.diaLogInfo.diaLogInputDisabled = true;\r\n            let countNum = maxNum--;\r\n            this.diaLogInfo.markedWords = `${countNum}s后获取`;\r\n            if (countNum === 0) {\r\n              clearInterval(timeId);\r\n              this.diaLogInfo.markedWords = \"点击获取验证码\";\r\n              this.diaLogInfo.diaLogInputDisabled = false;\r\n            }\r\n          }, 1000);\r\n        } else {\r\n          this.$notify({\r\n            title: result.message,\r\n            type: \"warning\",\r\n            position: \"top-right\",\r\n            showClose: false,\r\n          });\r\n        }\r\n      } else {\r\n        this.$notify({\r\n          title: \"请输入手机号\",\r\n          type: \"warning\",\r\n          position: \"bottom-left\",\r\n          // 是否显示关闭按钮\r\n          showClose: false,\r\n        });\r\n      }\r\n    },\r\n    // 游客登录\r\n    async anonimousLogo() {\r\n      this.$message({\r\n        type: \"error\",\r\n        message: \"此接口在修复中\",\r\n      });\r\n    },\r\n    // 二维码登录\r\n    async QrLogo() {\r\n      this.centerDialogVisible = true;\r\n      // 请求二维码key\r\n      let res = await reqQrKey();\r\n      if (res.code === 200) {\r\n        let key = res.data.unikey;\r\n        let keyUrl = await reqQrCreate(key);\r\n        if (keyUrl.code === 200) {\r\n          new QRCode(this.$refs.qrCodeUrl, {\r\n            text: keyUrl.data.qrurl,\r\n            width: 150,\r\n            height: 150,\r\n            colorDark: \"#000000\",\r\n            colorLight: \"#ffffff\",\r\n            correctLevel: QRCode.CorrectLevel.H,\r\n          });\r\n          QRCode.clear();\r\n        }\r\n      } else {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"网络错误\",\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#outer-wapper {\r\n  height: 500px;\r\n  .video-box {\r\n    position: relative;\r\n    height: 100vh;\r\n    background-color: #c1cff7;\r\n    position: relative;\r\n    /*进行视频裁剪*/\r\n    overflow: hidden;\r\n    #login-wapper {\r\n      position: absolute;\r\n      left: 35%;\r\n      top: 40%;\r\n      #login {\r\n        form {\r\n          button {\r\n            width: 200px;\r\n            margin-left: 60px;\r\n            font-size: 20px;\r\n          }\r\n        }\r\n        .otherLogo {\r\n          padding: 10px;\r\n          display: flex;\r\n          justify-content: space-around;\r\n          a {\r\n            cursor: pointer;\r\n            svg {\r\n              height: 40px;\r\n              widows: 40px;\r\n            }\r\n          }\r\n        }\r\n        .qrCode {\r\n          margin-top: 10px;\r\n          display: flex;\r\n          justify-content: center;\r\n          align-content: center;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .video-box .video-background {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    /*保证视频内容始终居中*/\r\n    transform: translate(-50%, -50%);\r\n    width: 100%;\r\n    height: 100%;\r\n    /*保证视频充满屏幕*/\r\n    object-fit: cover;\r\n    min-height: 800px;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}