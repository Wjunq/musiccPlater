{"ast":null,"code":"import _regeneratorRuntime from \"F:/Fanny/musicplayer/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"F:/Fanny/musicplayer/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.string.trim.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { reqLogin, reqSendPhoneVerify, reqCaptchaIsOk } from \"@/api\";\nexport default {\n  name: \"Login\",\n  data: function data() {\n    return {\n      phone: \"\",\n      password: \"\",\n      // 控制对话框是否隐藏\n      dialogFormVisible: false,\n      // 对话框的信息\n      diaLogInfo: {\n        iphone: \"\",\n        visibleNum: \"\",\n        markedWords: \"点击获取验证码\",\n        diaLogInputDisabled: false\n      }\n    };\n  },\n  methods: {\n    handlerLogin: function handlerLogin() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var phone, password, result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                phone = _this.phone, password = _this.password; // 手机和密码登录\n\n                if (!(phone && password)) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 4;\n                return reqLogin(phone, password);\n\n              case 4:\n                result = _context.sent;\n\n                if (result.code === 200) {\n                  _this.$message({\n                    type: \"success\",\n                    message: \"登录成功\"\n                  });\n\n                  console.log(result);\n                } else {\n                  _this.$message({\n                    type: \"error\",\n                    message: \"登录失败\"\n                  });\n                }\n\n                _context.next = 9;\n                break;\n\n              case 8:\n                _this.$message({\n                  type: \"warning\",\n                  message: \"请输入密码或手机号\"\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    // 其他登录方式\n    handlerOther: function handlerOther() {\n      this.dialogFormVisible = true;\n    },\n    // 点击对话框登录按钮的回调\n    handlerOk: function handlerOk() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _this2$diaLogInfo, iphone, visibleNum, result;\n\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // 验证验证码是否正确\n                _this2$diaLogInfo = _this2.diaLogInfo, iphone = _this2$diaLogInfo.iphone, visibleNum = _this2$diaLogInfo.visibleNum;\n\n                if (!(iphone && visibleNum)) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                _context2.next = 4;\n                return reqCaptchaIsOk(iphone, visibleNum);\n\n              case 4:\n                result = _context2.sent;\n\n                if (result.code === 200) {\n                  console.log(result);\n                } else {\n                  _this2.$message({\n                    type: \"warning\",\n                    title: \"验证码或手机号错误\"\n                  });\n                }\n\n                _context2.next = 9;\n                break;\n\n              case 8:\n                _this2.$notify({\n                  title: \"请输入手机号和验证码\",\n                  type: \"warning\",\n                  position: \"top-left\",\n                  showClose: false\n                });\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    // 点击获取手机验证码的回调\n    handlerSendPhoneVerify: function handlerSendPhoneVerify() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var result, maxNum, timeId;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!_this3.diaLogInfo.iphone.trim()) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                _context3.next = 3;\n                return reqSendPhoneVerify(_this3.diaLogInfo.iphone);\n\n              case 3:\n                result = _context3.sent;\n\n                if (result.code === 200) {\n                  // 发送成功，开始计时器,验证码60s之后重新发送\n                  maxNum = 60;\n                  timeId = setInterval(function () {\n                    _this3.diaLogInfo.diaLogInputDisabled = true;\n                    var countNum = maxNum--;\n                    _this3.diaLogInfo.markedWords = \"\".concat(countNum, \"s\\u540E\\u83B7\\u53D6\");\n\n                    if (countNum === 0) {\n                      clearInterval(timeId);\n                      _this3.diaLogInfo.markedWords = \"点击获取验证码\";\n                      _this3.diaLogInfo.diaLogInputDisabled = false;\n                    }\n                  }, 1000);\n                } else {\n                  _this3.$notify({\n                    title: result.message,\n                    type: \"warning\",\n                    position: \"top-right\",\n                    showClose: false\n                  });\n                }\n\n                _context3.next = 8;\n                break;\n\n              case 7:\n                _this3.$notify({\n                  title: \"请输入手机号\",\n                  type: \"warning\",\n                  position: \"bottom-left\",\n                  // 是否显示关闭按钮\n                  showClose: false\n                });\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;EACAA,aADA;EAEAC,IAFA,kBAEA;IACA;MACAC,SADA;MAEAC,YAFA;MAGA;MACAC,wBAJA;MAKA;MACAC;QACAC,UADA;QAEAC,cAFA;QAGAC,sBAHA;QAIAC;MAJA;IANA;EAaA,CAhBA;EAiBAC;IACAC,YADA,0BACA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAT,KADA,GACA,KADA,CACAA,KADA,EACAC,QADA,GACA,KADA,CACAA,QADA,EAEA;;gBAFA,MAGAD,iBAHA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAIAU,yBAJA;;cAAA;gBAIAC,MAJA;;gBAKA;kBACA;oBACAC,eADA;oBAEAC;kBAFA;;kBAIAC;gBACA,CANA,MAMA;kBACA;oBACAF,aADA;oBAEAC;kBAFA;gBAIA;;gBAhBA;gBAAA;;cAAA;gBAkBA;kBACAD,eADA;kBAEAC;gBAFA;;cAlBA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAuBA,CAxBA;IAyBA;IACAE,YA1BA,0BA0BA;MACA;IACA,CA5BA;IA6BA;IACAC,SA9BA,uBA8BA;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBACA;gBADA,oBAEA,iBAFA,EAEAZ,MAFA,qBAEAA,MAFA,EAEAC,UAFA,qBAEAA,UAFA;;gBAAA,MAGAD,oBAHA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAIAa,kCAJA;;cAAA;gBAIAN,MAJA;;gBAKA;kBACAG;gBACA,CAFA,MAEA;kBACA;oBACAF,eADA;oBAEAM;kBAFA;gBAIA;;gBAZA;gBAAA;;cAAA;gBAcA;kBACAA,mBADA;kBAEAN,eAFA;kBAGAO,oBAHA;kBAIAC;gBAJA;;cAdA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAqBA,CAnDA;IAoDA;IACAC,sBArDA,oCAqDA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACA,+BADA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAEAC,4CAFA;;cAAA;gBAEAX,MAFA;;gBAGA;kBACA;kBACAY,MAFA,GAEA,EAFA;kBAGAC,MAHA,GAGAC;oBACA;oBACA;oBACA;;oBACA;sBACAC;sBACA;sBACA;oBACA;kBACA,CATA,EASA,IATA,CAHA;gBAaA,CAbA,MAaA;kBACA;oBACAR,qBADA;oBAEAN,eAFA;oBAGAO,qBAHA;oBAIAC;kBAJA;gBAMA;;gBAvBA;gBAAA;;cAAA;gBAyBA;kBACAF,eADA;kBAEAN,eAFA;kBAGAO,uBAHA;kBAIA;kBACAC;gBALA;;cAzBA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAiCA;EAtFA;AAjBA","names":["name","data","phone","password","dialogFormVisible","diaLogInfo","iphone","visibleNum","markedWords","diaLogInputDisabled","methods","handlerLogin","reqLogin","result","type","message","console","handlerOther","handlerOk","reqCaptchaIsOk","title","position","showClose","handlerSendPhoneVerify","reqSendPhoneVerify","maxNum","timeId","setInterval","clearInterval"],"sourceRoot":"src/views/Login","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div id=\"outer-wapper\">\r\n    <!--设置视频为背景 -->\r\n    <div class=\"video-box\">\r\n      <video\r\n        src=\"./audio/fish.mp4\"\r\n        class=\"video-background\"\r\n        preload=\"auto\"\r\n        loop\r\n        playsinline\r\n        autoplay\r\n        muted\r\n      ></video>\r\n      <!-- 表单登录 -->\r\n      <div id=\"login-wapper\">\r\n        <div id=\"login\">\r\n          <!-- 登录的表单 -->\r\n          <el-form size=\"normal\" style=\"width: '50%'\">\r\n            <el-form-item label=\"手机号\" label-width=\"80px\">\r\n              <el-input v-model=\"phone\" placeholder=\"请输入手机号\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"密码\" label-width=\"80px\">\r\n              <el-input\r\n                placeholder=\"请输入密码\"\r\n                v-model=\"password\"\r\n                show-password\r\n              ></el-input>\r\n            </el-form-item>\r\n\r\n            <el-button type=\"primary\" round size=\"medium\" @click=\"handlerLogin\"\r\n              >登录</el-button\r\n            >\r\n\r\n            <!-- 点击其他方式登录弹出对话框 -->\r\n            <el-button type=\"success\" round size=\"medium\" @click=\"handlerOther\"\r\n              >其他方式登录</el-button\r\n            >\r\n            <!-- 三个别的方式登录 -->\r\n            <div class=\"otherLogo\">\r\n              <a href=\"\" title=\"游客登录\">\r\n                <svg\r\n                  class=\"icon\"\r\n                  width=\"40px\"\r\n                  height=\"40px\"\r\n                  viewBox=\"0 0 1024 1024\"\r\n                  version=\"1.1\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    fill=\"#bfbfbf\"\r\n                    d=\"M615.424 534.528c98.816-40.96 168.96-138.24 168.96-251.904 0-150.016-122.368-272.384-272.384-272.384s-272.384 122.368-272.384 272.384c0 113.664 69.632 210.944 168.96 251.904-217.6 45.568-385.024 232.96-397.824 462.848-0.512 8.704 6.144 15.872 14.336 16.384h1.024c8.192 0 14.848-6.144 15.36-14.336 13.824-245.76 215.04-439.296 460.288-444.416 3.584 0 6.656 0.512 10.24 0.512s6.656 0 10.24-0.512c245.248 5.12 446.464 198.656 460.288 444.416 0.512 8.704 7.68 14.848 16.384 14.336 8.704-0.512 14.848-7.68 14.336-16.384-12.8-230.4-180.224-417.28-397.824-462.848z m-345.088-251.904c0-133.12 108.544-241.664 241.664-241.664s241.664 108.544 241.664 241.664c0 129.024-101.376 234.496-228.864 241.152h-25.6c-127.488-6.656-228.864-112.128-228.864-241.152z\"\r\n                  />\r\n                </svg>\r\n              </a>\r\n              <a href=\"\" title=\"\">\r\n                <svg\r\n                  class=\"icon\"\r\n                  width=\"200px\"\r\n                  height=\"200.00px\"\r\n                  viewBox=\"0 0 1024 1024\"\r\n                  version=\"1.1\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    fill=\"#bfbfbf\"\r\n                    d=\"M838.954667 234.666667H170.666667c-3.626667 0-7.168 0.448-10.56 1.322666l323.690666 323.669334a21.333333 21.333333 0 0 0 30.165334 0L838.954667 234.666667z m46.144 14.186666l-260.693334 260.693334 262.933334 262.912c5.44-7.168 8.661333-16.106667 8.661333-25.792V277.333333c0-10.944-4.117333-20.906667-10.88-28.48zM843.861333 789.333333l-249.6-249.621333-50.133333 50.133333a64 64 0 0 1-90.517333 0l-50.112-50.133333L156.373333 786.88c4.48 1.578667 9.28 2.453333 14.314667 2.453333h673.194667zM128.661333 754.218667L373.333333 509.525333 129.578667 265.813333A42.709333 42.709333 0 0 0 128 277.333333v469.333334c0 2.56 0.213333 5.098667 0.661333 7.552zM170.666667 192h682.666666a85.333333 85.333333 0 0 1 85.333334 85.333333v469.333334a85.333333 85.333333 0 0 1-85.333334 85.333333H170.666667a85.333333 85.333333 0 0 1-85.333334-85.333333V277.333333a85.333333 85.333333 0 0 1 85.333334-85.333333z\"\r\n                  />\r\n                </svg>\r\n              </a>\r\n              <a href=\"\" title=\"\">\r\n                <svg></svg>\r\n              </a>\r\n            </div>\r\n          </el-form>\r\n\r\n          <!-- 对话框组件 -->\r\n          <el-dialog\r\n            title=\"其他方式登录\"\r\n            width=\"500px\"\r\n            :visible.sync=\"dialogFormVisible\"\r\n          >\r\n            <el-form>\r\n              <el-form-item label=\"手机号\" label-width=\"100px\">\r\n                <el-input\r\n                  autocomplete=\"off\"\r\n                  v-model=\"diaLogInfo.iphone\"\r\n                  placeholder=\"请输入手机号\"\r\n                ></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"验证码登录\" label-width=\"100px\">\r\n                <el-input\r\n                  style=\"width: 100px\"\r\n                  autocomplete=\"off\"\r\n                  placeholder=\"请输入验证码\"\r\n                  v-model=\"diaLogInfo.visibleNum\"\r\n                ></el-input>\r\n\r\n                <el-button\r\n                  type=\"primary\"\r\n                  size=\"default\"\r\n                  @click=\"handlerSendPhoneVerify\"\r\n                  :disabled=\"diaLogInfo.diaLogInputDisabled\"\r\n                  >{{ diaLogInfo.markedWords }}</el-button\r\n                >\r\n              </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n              <el-button type=\"primary\" @click=\"handlerOk\">登 录</el-button>\r\n            </div>\r\n          </el-dialog>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reqLogin, reqSendPhoneVerify, reqCaptchaIsOk } from \"@/api\";\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      phone: \"\",\r\n      password: \"\",\r\n      // 控制对话框是否隐藏\r\n      dialogFormVisible: false,\r\n      // 对话框的信息\r\n      diaLogInfo: {\r\n        iphone: \"\",\r\n        visibleNum: \"\",\r\n        markedWords: \"点击获取验证码\",\r\n        diaLogInputDisabled: false,\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async handlerLogin() {\r\n      const { phone, password } = this;\r\n      // 手机和密码登录\r\n      if (phone && password) {\r\n        let result = await reqLogin(phone, password);\r\n        if (result.code === 200) {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"登录成功\",\r\n          });\r\n          console.log(result);\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"登录失败\",\r\n          });\r\n        }\r\n      } else {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"请输入密码或手机号\",\r\n        });\r\n      }\r\n    },\r\n    // 其他登录方式\r\n    handlerOther() {\r\n      this.dialogFormVisible = true;\r\n    },\r\n    // 点击对话框登录按钮的回调\r\n    async handlerOk() {\r\n      // 验证验证码是否正确\r\n      const { iphone, visibleNum } = this.diaLogInfo;\r\n      if (iphone && visibleNum) {\r\n        let result = await reqCaptchaIsOk(iphone, visibleNum);\r\n        if (result.code === 200) {\r\n          console.log(result);\r\n        } else {\r\n          this.$message({\r\n            type: \"warning\",\r\n            title: \"验证码或手机号错误\",\r\n          });\r\n        }\r\n      } else {\r\n        this.$notify({\r\n          title: \"请输入手机号和验证码\",\r\n          type: \"warning\",\r\n          position: \"top-left\",\r\n          showClose: false,\r\n        });\r\n      }\r\n    },\r\n    // 点击获取手机验证码的回调\r\n    async handlerSendPhoneVerify() {\r\n      if (this.diaLogInfo.iphone.trim()) {\r\n        let result = await reqSendPhoneVerify(this.diaLogInfo.iphone);\r\n        if (result.code === 200) {\r\n          // 发送成功，开始计时器,验证码60s之后重新发送\r\n          let maxNum = 60;\r\n          let timeId = setInterval(() => {\r\n            this.diaLogInfo.diaLogInputDisabled = true;\r\n            let countNum = maxNum--;\r\n            this.diaLogInfo.markedWords = `${countNum}s后获取`;\r\n            if (countNum === 0) {\r\n              clearInterval(timeId);\r\n              this.diaLogInfo.markedWords = \"点击获取验证码\";\r\n              this.diaLogInfo.diaLogInputDisabled = false;\r\n            }\r\n          }, 1000);\r\n        } else {\r\n          this.$notify({\r\n            title: result.message,\r\n            type: \"warning\",\r\n            position: \"top-right\",\r\n            showClose: false,\r\n          });\r\n        }\r\n      } else {\r\n        this.$notify({\r\n          title: \"请输入手机号\",\r\n          type: \"warning\",\r\n          position: \"bottom-left\",\r\n          // 是否显示关闭按钮\r\n          showClose: false,\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#outer-wapper {\r\n  height: 500px;\r\n  .video-box {\r\n    position: relative;\r\n    height: 100vh;\r\n    background-color: #c1cff7;\r\n    position: relative;\r\n    /*进行视频裁剪*/\r\n    overflow: hidden;\r\n    #login-wapper {\r\n      position: absolute;\r\n      left: 35%;\r\n      top: 40%;\r\n      #login {\r\n        form {\r\n          button {\r\n            width: 200px;\r\n            margin-left: 60px;\r\n            font-size: 20px;\r\n          }\r\n        }\r\n        .otherLogo {\r\n          border: 1px solid red;\r\n          a {\r\n            border: 2px solid blue;\r\n            svg {\r\n              border: 2px solid green;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .video-box .video-background {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    /*保证视频内容始终居中*/\r\n    transform: translate(-50%, -50%);\r\n    width: 100%;\r\n    height: 100%;\r\n    /*保证视频充满屏幕*/\r\n    object-fit: cover;\r\n    min-height: 800px;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}