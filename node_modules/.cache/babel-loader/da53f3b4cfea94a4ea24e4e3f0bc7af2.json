{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { reqLogin, reqSendPhoneVerify, reqCaptchaIsOk } from \"@/api\";\nexport default {\n  name: \"Login\",\n\n  data() {\n    return {\n      phone: \"\",\n      password: \"\",\n      // 控制对话框是否隐藏\n      dialogFormVisible: false,\n      // 对话框的信息\n      diaLogInfo: {\n        iphone: \"\",\n        visibleNum: \"\",\n        markedWords: \"点击获取验证码\",\n        diaLogInputDisabled: false\n      }\n    };\n  },\n\n  methods: {\n    async handlerLogin() {\n      const {\n        phone,\n        password\n      } = this; // 手机和密码登录\n\n      if (phone && password) {\n        let result = await reqLogin(phone, password);\n\n        if (result.code === 200) {\n          this.$message({\n            type: \"success\",\n            message: \"登录成功\"\n          });\n          console.log(result);\n        } else {\n          this.$message({\n            type: \"error\",\n            message: \"登录失败\"\n          });\n        }\n      } else {\n        this.$message({\n          type: \"warning\",\n          message: \"请输入密码或手机号\"\n        });\n      }\n    },\n\n    // 其他登录方式\n    handlerOther() {\n      this.dialogFormVisible = true;\n    },\n\n    // 点击对话框登录按钮的回调\n    async handlerOk() {\n      // 验证验证码是否正确\n      const {\n        iphone,\n        visibleNum\n      } = this.diaLogInfo;\n\n      if (iphone && visibleNum) {\n        let result = await reqCaptchaIsOk(iphone, visibleNum);\n\n        if (result.code === 200) {\n          console.log(result);\n        } else {\n          this.$message({\n            type: \"warning\",\n            title: '验证码或手机号错误'\n          });\n        }\n      } else {\n        this.$notify({\n          title: '请输入手机号和验证码',\n          type: 'warning',\n          position: \"top-left\",\n          showClose: false\n        });\n      }\n    },\n\n    // 点击获取手机验证码的回调\n    async handlerSendPhoneVerify() {\n      if (this.diaLogInfo.iphone.trim()) {\n        let result = await reqSendPhoneVerify(this.diaLogInfo.iphone);\n\n        if (result.code === 200) {\n          // 发送成功，开始计时器,验证码60s之后重新发送\n          let maxNum = 60;\n          let timeId = setInterval(() => {\n            this.diaLogInfo.diaLogInputDisabled = true;\n            let countNum = maxNum--;\n            this.diaLogInfo.markedWords = `${countNum}s后获取`;\n\n            if (countNum === 0) {\n              clearInterval(timeId);\n              this.diaLogInfo.markedWords = \"点击获取验证码\";\n              this.diaLogInfo.diaLogInputDisabled = false;\n            }\n          }, 1000);\n        } else {\n          this.$notify({\n            title: result.message,\n            type: \"warning\",\n            position: \"top-right\",\n            showClose: false\n          });\n        }\n      } else {\n        this.$notify({\n          title: \"请输入手机号\",\n          type: \"warning\",\n          position: \"bottom-left\",\n          // 是否显示关闭按钮\n          showClose: false\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;EACAA,aADA;;EAEAC;IACA;MACAC,SADA;MAEAC,YAFA;MAGA;MACAC,wBAJA;MAKA;MACAC;QACAC,UADA;QAEAC,cAFA;QAGAC,sBAHA;QAIAC;MAJA;IANA;EAaA,CAhBA;;EAiBAC;IACA;MACA;QAAAR;QAAAC;MAAA,SADA,CAEA;;MACA;QACA;;QACA;UACA;YACAQ,eADA;YAEAC;UAFA;UAIAC;QACA,CANA,MAMA;UACA;YACAF,aADA;YAEAC;UAFA;QAIA;MACA,CAdA,MAcA;QACA;UACAD,eADA;UAEAC;QAFA;MAIA;IACA,CAxBA;;IAyBA;IACAE;MACA;IACA,CA5BA;;IA6BA;IACA;MACA;MACA;QAAAR;QAAAC;MAAA;;MACA;QACA;;QACA;UACAM;QACA,CAFA,MAEA;UACA;YACAF,eADA;YAEAI;UAFA;QAIA;MACA,CAVA,MAUA;QACA;UACAA,mBADA;UAEAJ,eAFA;UAGAK,oBAHA;UAIAC;QAJA;MAMA;IACA,CAnDA;;IAoDA;IACA;MACA;QACA;;QACA;UACA;UACA;UACA;YACA;YACA;YACA;;YACA;cACAC;cACA;cACA;YACA;UACA,CATA,EASA,IATA;QAUA,CAbA,MAaA;UACA;YACAH,qBADA;YAEAJ,eAFA;YAGAK,qBAHA;YAIAC;UAJA;QAMA;MACA,CAvBA,MAuBA;QACA;UACAF,eADA;UAEAJ,eAFA;UAGAK,uBAHA;UAIA;UACAC;QALA;MAOA;IACA;;EAtFA;AAjBA","names":["name","data","phone","password","dialogFormVisible","diaLogInfo","iphone","visibleNum","markedWords","diaLogInputDisabled","methods","type","message","console","handlerOther","title","position","showClose","clearInterval"],"sourceRoot":"src/views/Login","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div id=\"outer-wapper\">\r\n    <!--设置视频为背景 -->\r\n    <div class=\"video-box\">\r\n      <video\r\n        src=\"./audio/fish.mp4\"\r\n        class=\"video-background\"\r\n        preload=\"auto\"\r\n        loop\r\n        playsinline\r\n        autoplay\r\n        muted\r\n      ></video>\r\n      <!-- 表单登录 -->\r\n      <div id=\"login-wapper\">\r\n        <div id=\"login\">\r\n          <!-- 登录的表单 -->\r\n          <el-form size=\"normal\" style=\"width: '50%'\">\r\n            <el-form-item label=\"手机号\" label-width=\"80px\">\r\n              <el-input v-model=\"phone\" placeholder=\"请输入手机号\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"密码\" label-width=\"80px\">\r\n              <el-input\r\n                placeholder=\"请输入密码\"\r\n                v-model=\"password\"\r\n                show-password\r\n              ></el-input>\r\n            </el-form-item>\r\n\r\n            <el-button type=\"primary\" round size=\"medium\" @click=\"handlerLogin\"\r\n              >登录</el-button\r\n            >\r\n\r\n            <!-- 点击其他方式登录弹出对话框 -->\r\n            <el-button type=\"success\" round size=\"medium\" @click=\"handlerOther\"\r\n              >其他方式登录</el-button\r\n            >\r\n          </el-form>\r\n\r\n          <!-- 对话框组件 -->\r\n          <el-dialog\r\n            title=\"其他方式登录\"\r\n            width=\"500px\"\r\n            :visible.sync=\"dialogFormVisible\"\r\n          >\r\n            <el-form>\r\n              <el-form-item label=\"手机号\" label-width=\"100px\">\r\n                <el-input\r\n                  autocomplete=\"off\"\r\n                  v-model=\"diaLogInfo.iphone\"\r\n                  placeholder=\"请输入手机号\"\r\n                ></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"验证码登录\" label-width=\"100px\">\r\n                <el-input\r\n                  style=\"width: 100px\"\r\n                  autocomplete=\"off\"\r\n                  placeholder=\"请输入验证码\"\r\n                  v-model=\"diaLogInfo.visibleNum\"\r\n                ></el-input>\r\n\r\n                <el-button\r\n                  type=\"primary\"\r\n                  size=\"default\"\r\n                  @click=\"handlerSendPhoneVerify\"\r\n                  :disabled=\"diaLogInfo.diaLogInputDisabled\"\r\n                  >{{ diaLogInfo.markedWords }}</el-button\r\n                >\r\n              </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n              <el-button type=\"primary\" @click=\"handlerOk\">登 录</el-button>\r\n            </div>\r\n          </el-dialog>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reqLogin, reqSendPhoneVerify,reqCaptchaIsOk} from \"@/api\";\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      phone: \"\",\r\n      password: \"\",\r\n      // 控制对话框是否隐藏\r\n      dialogFormVisible: false,\r\n      // 对话框的信息\r\n      diaLogInfo: {\r\n        iphone: \"\",\r\n        visibleNum: \"\",\r\n        markedWords: \"点击获取验证码\",\r\n        diaLogInputDisabled: false,\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async handlerLogin() {\r\n      const { phone, password } = this;\r\n      // 手机和密码登录\r\n      if (phone && password) {\r\n        let result = await reqLogin(phone, password);\r\n        if (result.code === 200) {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"登录成功\",\r\n          });\r\n          console.log(result);\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"登录失败\",\r\n          });\r\n        }\r\n      } else {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"请输入密码或手机号\",\r\n        });\r\n      }\r\n    },\r\n    // 其他登录方式\r\n    handlerOther() {\r\n      this.dialogFormVisible = true;\r\n    },\r\n    // 点击对话框登录按钮的回调\r\n    async handlerOk() {\r\n      // 验证验证码是否正确\r\n      const {iphone,visibleNum} = this.diaLogInfo;\r\n      if(iphone && visibleNum){\r\n        let result = await reqCaptchaIsOk(iphone,visibleNum);\r\n        if(result.code === 200){\r\n          console.log(result)\r\n        }else{\r\n          this.$message({\r\n            type:\"warning\",\r\n            title:'验证码或手机号错误'\r\n          })\r\n        }\r\n      }else{\r\n        this.$notify({\r\n          title:'请输入手机号和验证码',\r\n          type:'warning',\r\n          position:\"top-left\",\r\n          showClose:false,\r\n        })\r\n      }\r\n    },\r\n    // 点击获取手机验证码的回调\r\n    async handlerSendPhoneVerify() {\r\n      if (this.diaLogInfo.iphone.trim()) {\r\n        let result = await reqSendPhoneVerify(this.diaLogInfo.iphone);\r\n        if (result.code === 200) {\r\n          // 发送成功，开始计时器,验证码60s之后重新发送\r\n          let maxNum = 60;\r\n          let timeId = setInterval(() => {\r\n            this.diaLogInfo.diaLogInputDisabled = true;\r\n            let countNum = maxNum--;\r\n            this.diaLogInfo.markedWords = `${countNum}s后获取`;\r\n            if (countNum === 0) {\r\n              clearInterval(timeId);\r\n              this.diaLogInfo.markedWords = \"点击获取验证码\";\r\n              this.diaLogInfo.diaLogInputDisabled = false;\r\n            }\r\n          }, 1000);\r\n        } else {\r\n          this.$notify({\r\n            title: result.message,\r\n            type: \"warning\",\r\n            position: \"top-right\",\r\n            showClose: false,\r\n          });\r\n        }\r\n      } else {\r\n        this.$notify({\r\n          title: \"请输入手机号\",\r\n          type: \"warning\",\r\n          position: \"bottom-left\",\r\n          // 是否显示关闭按钮\r\n          showClose: false,\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#outer-wapper {\r\n  height: 500px;\r\n  .video-box {\r\n    position: relative;\r\n    height: 100vh;\r\n    background-color: #c1cff7;\r\n    position: relative;\r\n    /*进行视频裁剪*/\r\n    overflow: hidden;\r\n    #login-wapper {\r\n      position: absolute;\r\n      left: 35%;\r\n      top: 40%;\r\n      #login {\r\n        form {\r\n          button {\r\n            width: 200px;\r\n            margin-left: 60px;\r\n            font-size: 20px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .video-box .video-background {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    /*保证视频内容始终居中*/\r\n    transform: translate(-50%, -50%);\r\n    width: 100%;\r\n    height: 100%;\r\n    /*保证视频充满屏幕*/\r\n    object-fit: cover;\r\n    min-height: 800px;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}