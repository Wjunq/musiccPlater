{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { reqSingerAll } from \"@/api\";\nexport default {\n  name: \"classifyDetails\",\n\n  data() {\n    return {\n      pager: 1,\n      offset: 0,\n      singerList: {\n        id: \"\",\n        name: \"\",\n        img1v1Url: \"\"\n      },\n      songs: [],\n      songInfo: {\n        more: true,\n        total: 0\n      }\n    };\n  },\n\n  methods: {\n    async getSingerAll(id, offset) {\n      let result = await reqSingerAll(id, offset);\n\n      if (result.code === 200) {\n        this.songs = result.songs;\n        this.songInfo.more = result.more;\n        this.songInfo.total = result.total;\n      } else {\n        this.$message({\n          type: \"warning\",\n          message: \"歌手详情请求失败\"\n        });\n      }\n    },\n\n    // 点击每页改变的回调，上一页下一页\n    handleCurrentChange(pagers = 1) {\n      this.pager = pagers;\n      this.offset = (pagers - 1) * 30;\n      const {\n        id\n      } = this.singerList;\n      this.getSingerAll(id, this.offset);\n    },\n\n    // 跳转到播放器的回调\n    toMusicPlayer(id) {\n      this.$router.push({\n        path: \"/musicPlayer\",\n        query: {\n          id\n        }\n      });\n    }\n\n  },\n\n  mounted() {\n    const {\n      offset\n    } = this;\n    const {\n      id\n    } = this.$route.query;\n    this.singerList = Object.assign(this.$route.query);\n    this.getSingerAll(id, offset);\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;EACAA,uBADA;;EAEAC;IACA;MACAC,QADA;MAEAC,SAFA;MAGAC;QACAC,MADA;QAEAL,QAFA;QAGAM;MAHA,CAHA;MAQAC,SARA;MASAC;QACAC,UADA;QAEAC;MAFA;IATA;EAcA,CAjBA;;EAkBAC;IACA;MACA;;MACA;QACA;QACA;QACA;MACA,CAJA,MAIA;QACA;UACAC,eADA;UAEAC;QAFA;MAIA;IACA,CAbA;;IAcA;IACAC;MACA;MACA;MACA;QAAAT;MAAA;MACA;IACA,CApBA;;IAqBA;IACAU;MACA;QACAC,oBADA;QAEAC;UAAAZ;QAAA;MAFA;IAIA;;EA3BA,CAlBA;;EA+CAa;IACA;MAAAf;IAAA;IACA;MAAAE;IAAA;IACA;IACA;EACA;;AApDA","names":["name","data","pager","offset","singerList","id","img1v1Url","songs","songInfo","more","total","methods","type","message","handleCurrentChange","toMusicPlayer","path","query","mounted"],"sourceRoot":"src/views/Classify/classifyDetails","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div id=\"classifyDetails-wapper\">\r\n    <!-- 图片加姓名介绍 -->\r\n    <div class=\"page-header\">\r\n      <img :src=\"singerList.img1v1Url\" alt=\"\" />\r\n      <h1>{{ singerList.name }}</h1>\r\n    </div>\r\n    <!-- 歌曲展示 \r\n     @click=\"\" 点击跳转到播放页面，后续添加\r\n    -->\r\n    <ul class=\"list-group\">\r\n      <li\r\n        class=\"list-group-item glyphicon glyphicon-music\"\r\n        v-for=\"song in songs\"\r\n        :key=\"song.id\"\r\n        @click=\"toMusicPlayer(song.id)\"\r\n      >\r\n        {{ song.name }} --- 作者：<span v-for=\"art in song.ar\" :key=\"art.id\"\r\n          >{{ art.name }};</span\r\n        >\r\n      </li>\r\n    </ul>\r\n    <!-- 分页器 -->\r\n    <div class=\"block\">\r\n      <el-pagination\r\n        @current-change=\"handleCurrentChange\"\r\n        :page-size=\"songs.length\"\r\n        layout=\"total, prev, pager, next\"\r\n        :total=\"songInfo.total\"\r\n        background\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reqSingerAll } from \"@/api\";\r\nexport default {\r\n  name: \"classifyDetails\",\r\n  data() {\r\n    return {\r\n      pager: 1,\r\n      offset: 0,\r\n      singerList: {\r\n        id: \"\",\r\n        name: \"\",\r\n        img1v1Url: \"\",\r\n      },\r\n      songs: [],\r\n      songInfo: {\r\n        more: true,\r\n        total: 0,\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async getSingerAll(id, offset) {\r\n      let result = await reqSingerAll(id, offset);\r\n      if (result.code === 200) {\r\n        this.songs = result.songs;\r\n        this.songInfo.more = result.more;\r\n        this.songInfo.total = result.total;\r\n      } else {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"歌手详情请求失败\",\r\n        });\r\n      }\r\n    },\r\n    // 点击每页改变的回调，上一页下一页\r\n    handleCurrentChange(pagers = 1) {\r\n      this.pager = pagers;\r\n      this.offset = (pagers - 1) * 30;\r\n      const { id } = this.singerList;\r\n      this.getSingerAll(id, this.offset);\r\n    },\r\n    // 跳转到播放器的回调\r\n    toMusicPlayer(id) {\r\n      this.$router.push({\r\n        path: \"/musicPlayer\",\r\n        query:{id}\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    const { offset } = this;\r\n    const { id } = this.$route.query;\r\n    this.singerList = Object.assign(this.$route.query);\r\n    this.getSingerAll(id, offset);\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#classifyDetails-wapper {\r\n  .page-header {\r\n    img {\r\n      width: 180px;\r\n    }\r\n  }\r\n  ul {\r\n    li:hover {\r\n      background-color: #ecffff;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n  div.block {\r\n    display: flex;\r\n    align-content: center;\r\n    justify-content: center;\r\n    padding-bottom: 20px;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}