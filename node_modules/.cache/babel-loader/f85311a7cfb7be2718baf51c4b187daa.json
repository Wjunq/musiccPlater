{"ast":null,"code":"import _regeneratorRuntime from \"F:/Fanny/musicplayer/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"F:/Fanny/musicplayer/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { reqLogin, reqSendPhoneVerify } from \"@/api\";\nexport default {\n  name: \"Login\",\n  data: function data() {\n    return {\n      phone: \"\",\n      password: \"\",\n      // 控制对话框是否隐藏\n      dialogFormVisible: false,\n      // 对话框的信息\n      diaLogInfo: {\n        iphone: \"\",\n        markedWords: \"点击获取验证码\",\n        diaLogInputDisabled: false\n      }\n    };\n  },\n  methods: {\n    handlerLogin: function handlerLogin() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var phone, password, result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                phone = _this.phone, password = _this.password; // 判断是否为空\n\n                if (!(phone && password)) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 4;\n                return reqLogin(phone, password);\n\n              case 4:\n                result = _context.sent;\n\n                if (result.code === 200) {\n                  _this.$message({\n                    type: \"success\",\n                    message: \"登录成功\"\n                  });\n\n                  console.log(result);\n                } else {\n                  _this.$message({\n                    type: \"error\",\n                    message: \"登录失败\"\n                  });\n                }\n\n                _context.next = 9;\n                break;\n\n              case 8:\n                _this.$message({\n                  type: \"warning\",\n                  message: \"请输入密码或手机号\"\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    // 其他登录方式\n    handlerOther: function handlerOther() {\n      this.dialogFormVisible = true;\n    },\n    // 点击确实按钮的回调\n    handlerOk: function handlerOk() {\n      this.dialogFormVisible = false;\n    },\n    // 点击获取手机验证码的回调\n    handlerSendPhoneVerify: function handlerSendPhoneVerify() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var maxNum, _this2$diaLogInfo, diaLogInputDisabled, markedWords, timeId, result;\n\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                maxNum = 60;\n                _this2$diaLogInfo = _this2.diaLogInfo, diaLogInputDisabled = _this2$diaLogInfo.diaLogInputDisabled, markedWords = _this2$diaLogInfo.markedWords;\n                timeId = setTimeout(function () {\n                  diaLogInputDisabled = true;\n                  markedWords = \"\".concat(maxNum, \"\\u79D2\\u4E4B\\u540E\\u83B7\\u53D6\");\n                  var countNum = maxNum--;\n\n                  if (countNum === 0) {\n                    clearInterval(timeId);\n                    markedWords = \"点击获取验证码\";\n                    diaLogInputDisabled = true;\n                  }\n                }, 1000);\n\n                if (!_this2.diaLogInfo.iphone) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                _context2.next = 6;\n                return reqSendPhoneVerify(_this2.diaLogInfo.iphone);\n\n              case 6:\n                result = _context2.sent;\n\n                if (result.code === 200) {// 发送成功，开始计时器\n                } else {\n                  _this2.$notify({\n                    title: result.message,\n                    type: \"warning\",\n                    position: \"top-right\",\n                    showClose: false\n                  });\n                }\n\n                _context2.next = 11;\n                break;\n\n              case 10:\n                _this2.$notify({\n                  title: \"请输入手机号\",\n                  type: \"warning\",\n                  position: \"bottom-left\",\n                  // 是否显示关闭按钮\n                  showClose: false\n                });\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;EACAA,aADA;EAEAC,IAFA,kBAEA;IACA;MACAC,SADA;MAEAC,YAFA;MAGA;MACAC,wBAJA;MAKA;MACAC;QACAC,UADA;QAEAC,sBAFA;QAGAC;MAHA;IANA;EAYA,CAfA;EAgBAC;IACAC,YADA,0BACA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAR,KADA,GACA,KADA,CACAA,KADA,EACAC,QADA,GACA,KADA,CACAA,QADA,EAEA;;gBAFA,MAGAD,iBAHA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAIAS,yBAJA;;cAAA;gBAIAC,MAJA;;gBAKA;kBACA;oBACAC,eADA;oBAEAC;kBAFA;;kBAIAC;gBACA,CANA,MAMA;kBACA;oBACAF,aADA;oBAEAC;kBAFA;gBAIA;;gBAhBA;gBAAA;;cAAA;gBAkBA;kBACAD,eADA;kBAEAC;gBAFA;;cAlBA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAuBA,CAxBA;IAyBA;IACAE,YA1BA,0BA0BA;MACA;IACA,CA5BA;IA6BA;IACAC,SA9BA,uBA8BA;MACA;IACA,CAhCA;IAiCA;IACAC,sBAlCA,oCAkCA;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBACAC,MADA,GACA,EADA;gBAAA,oBAEA,iBAFA,EAEAX,mBAFA,qBAEAA,mBAFA,EAEAD,WAFA,qBAEAA,WAFA;gBAGAa,MAHA,GAGAC;kBACAb;kBACAD;kBACA;;kBACA;oBACAe;oBACAf;oBACAC;kBACA;gBACA,CATA,EASA,IATA,CAHA;;gBAAA,KAcA,wBAdA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAeAe,4CAfA;;cAAA;gBAeAX,MAfA;;gBAgBA,0BACA;gBACA,CAFA,MAEA;kBACA;oBACAY,qBADA;oBAEAX,eAFA;oBAGAY,qBAHA;oBAIAC;kBAJA;gBAMA;;gBAzBA;gBAAA;;cAAA;gBA2BA;kBACAF,eADA;kBAEAX,eAFA;kBAGAY,uBAHA;kBAIA;kBACAC;gBALA;;cA3BA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAmCA;EArEA;AAhBA","names":["name","data","phone","password","dialogFormVisible","diaLogInfo","iphone","markedWords","diaLogInputDisabled","methods","handlerLogin","reqLogin","result","type","message","console","handlerOther","handlerOk","handlerSendPhoneVerify","maxNum","timeId","setTimeout","clearInterval","reqSendPhoneVerify","title","position","showClose"],"sourceRoot":"src/views/Login","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div id=\"outer-wapper\">\r\n    <!--设置视频为背景 -->\r\n    <div class=\"video-box\">\r\n      <video\r\n        src=\"./audio/sea.mp4\"\r\n        class=\"video-background\"\r\n        preload=\"auto\"\r\n        loop\r\n        playsinline\r\n        autoplay\r\n        muted\r\n      ></video>\r\n      <!-- 表单登录 -->\r\n      <div id=\"login-wapper\">\r\n        <div id=\"login\">\r\n          <!-- 登录的表单 -->\r\n          <el-form size=\"normal\" style=\"width: '50%'\">\r\n            <el-form-item label=\"手机号\" label-width=\"80px\">\r\n              <el-input v-model=\"phone\" placeholder=\"请输入手机号\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"密码\" label-width=\"80px\">\r\n              <el-input\r\n                placeholder=\"请输入密码\"\r\n                v-model=\"password\"\r\n                show-password\r\n              ></el-input>\r\n            </el-form-item>\r\n\r\n            <el-button type=\"primary\" round size=\"medium\" @click=\"handlerLogin\"\r\n              >登录</el-button\r\n            >\r\n\r\n            <!-- 点击其他方式登录弹出对话框 -->\r\n            <el-button type=\"success\" round size=\"medium\" @click=\"handlerOther\"\r\n              >其他方式登录</el-button\r\n            >\r\n          </el-form>\r\n\r\n          <!-- 对话框组件 -->\r\n          <el-dialog\r\n            title=\"其他方式登录\"\r\n            width=\"500px\"\r\n            :visible.sync=\"dialogFormVisible\"\r\n          >\r\n            <el-form>\r\n              <el-form-item label=\"手机号\" label-width=\"100px\">\r\n                <el-input\r\n                  autocomplete=\"off\"\r\n                  v-model=\"diaLogInfo.iphone\"\r\n                  placeholder=\"请输入手机号\"\r\n                ></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"验证码登录\" label-width=\"100px\">\r\n                <el-input\r\n                  style=\"width: 100px\"\r\n                  autocomplete=\"off\"\r\n                  placeholder=\"请输入验证码\"\r\n                ></el-input>\r\n\r\n                <el-button\r\n                  type=\"primary\"\r\n                  size=\"default\"\r\n                  @click=\"handlerSendPhoneVerify\"\r\n                  :disabled=\"diaLogInfo.diaLogInputDisabled\"\r\n                  >{{ diaLogInfo.markedWords }}</el-button\r\n                >\r\n              </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n              <el-button type=\"primary\" @click=\"handlerOk\">确 定</el-button>\r\n            </div>\r\n          </el-dialog>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reqLogin, reqSendPhoneVerify } from \"@/api\";\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      phone: \"\",\r\n      password: \"\",\r\n      // 控制对话框是否隐藏\r\n      dialogFormVisible: false,\r\n      // 对话框的信息\r\n      diaLogInfo: {\r\n        iphone: \"\",\r\n        markedWords: \"点击获取验证码\",\r\n        diaLogInputDisabled: false,\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async handlerLogin() {\r\n      const { phone, password } = this;\r\n      // 判断是否为空\r\n      if (phone && password) {\r\n        let result = await reqLogin(phone, password);\r\n        if (result.code === 200) {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"登录成功\",\r\n          });\r\n          console.log(result);\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"登录失败\",\r\n          });\r\n        }\r\n      } else {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"请输入密码或手机号\",\r\n        });\r\n      }\r\n    },\r\n    // 其他登录方式\r\n    handlerOther() {\r\n      this.dialogFormVisible = true;\r\n    },\r\n    // 点击确实按钮的回调\r\n    handlerOk() {\r\n      this.dialogFormVisible = false;\r\n    },\r\n    // 点击获取手机验证码的回调\r\n    async handlerSendPhoneVerify() {\r\n      let maxNum = 60;\r\n      let { diaLogInputDisabled, markedWords } = this.diaLogInfo;\r\n      let timeId = setTimeout(() => {\r\n        diaLogInputDisabled = true;\r\n        markedWords = `${maxNum}秒之后获取`;\r\n        let countNum = maxNum--;\r\n        if (countNum === 0) {\r\n          clearInterval(timeId);\r\n          markedWords = \"点击获取验证码\";\r\n          diaLogInputDisabled = true;\r\n        }\r\n      }, 1000);\r\n\r\n      if (this.diaLogInfo.iphone) {\r\n        let result = await reqSendPhoneVerify(this.diaLogInfo.iphone);\r\n        if (result.code === 200) {\r\n          // 发送成功，开始计时器\r\n        } else {\r\n          this.$notify({\r\n            title: result.message,\r\n            type: \"warning\",\r\n            position: \"top-right\",\r\n            showClose: false,\r\n          });\r\n        }\r\n      } else {\r\n        this.$notify({\r\n          title: \"请输入手机号\",\r\n          type: \"warning\",\r\n          position: \"bottom-left\",\r\n          // 是否显示关闭按钮\r\n          showClose: false,\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#outer-wapper {\r\n  height: 500px;\r\n  .video-box {\r\n    position: relative;\r\n    height: 100vh;\r\n    background-color: #c1cff7;\r\n    position: relative;\r\n    /*进行视频裁剪*/\r\n    overflow: hidden;\r\n    #login-wapper {\r\n      position: absolute;\r\n      left: 35%;\r\n      top: 40%;\r\n      #login {\r\n        form {\r\n          button {\r\n            width: 200px;\r\n            margin-left: 60px;\r\n            font-size: 20px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .video-box .video-background {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    /*保证视频内容始终居中*/\r\n    transform: translate(-50%, -50%);\r\n    width: 100%;\r\n    height: 100%;\r\n    /*保证视频充满屏幕*/\r\n    object-fit: cover;\r\n    min-height: 800px;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}